<?php
/**
 * Intenso Premium Theme
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2014 Itactica (http://www.itactica.com)
 * @license     http://getintenso.com/license/regular
 */
/**
 * Scripts added before the body closing tag
 */
?>
<?php
$whatsappNumber = Mage::getStoreConfig('intenso/contact/whatsapp_contact_number', Mage::app()->getStore());
$whatsappWP = str_replace("+", "", $whatsappNumber);
?>

<nav class="menu-chat" id="menu-chat" style="display: none;">
	<div class="chat-button-animation" id="chat_action">
	<?php if($whatsappNumber): ?>
		<div class="chat-open">
			<svg width="60px" height="60px" viewBox="0 0 60 60"><svg x="0" y="0" width="60px" height="60px"><defs><linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="linearGradient_chat_open"><stop stop-color="#00B2FF" offset="0%"></stop><stop stop-color="#006AFF" offset="100%"></stop></linearGradient><linearGradient id="svg_linearGradient-1" x1="28.5" x2="28.5" y1="46" y2="3.088" gradientUnits="userSpaceOnUse" spreadMethod="reflect"><stop offset="0" stop-color="#155cde"></stop><stop offset=".007" stop-color="#155dde"></stop><stop offset=".459" stop-color="#238ce8"></stop><stop offset=".804" stop-color="#2baaee"></stop><stop offset="1" stop-color="#2eb5f0"></stop></linearGradient></defs><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g><circle fill="#FFFFFF" cx="30" cy="30" r="30"></circle><svg x="10" y="10"><g><rect id="svg_container_1" x="0" y="0" width="40" height="40"></rect><g id="svg_logo_1"><path d="M20,0 C8.7334,0 0,8.2528 0,19.4 C0,25.2307 2.3896,30.2691 6.2811,33.7492 C6.6078,34.0414 6.805,34.4513 6.8184,34.8894 L6.9273,38.4474 C6.9621,39.5819 8.1343,40.3205 9.1727,39.8621 L13.1424,38.1098 C13.4789,37.9612 13.856,37.9335 14.2106,38.0311 C16.0348,38.5327 17.9763,38.8 20,38.8 C31.2666,38.8 40,30.5472 40,19.4 C40,8.2528 31.2666,0 20,0" id="svg_bubble_1" fill="url(#svg_linearGradient-1)"></path><path xmlns="http://www.w3.org/2000/svg" fill="#FFFFFF" d="M338.783,160h-200c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5h200c7.5,0,13.5-6,13.5-13.5S346.183,160,338.783,160z"/><circle fill="#FFFFFF" cx="9.6" cy="19.4" r="2.4"/><circle fill="#FFFFFF" cx="19.6" cy="19.4" r="2.4"/><circle fill="#FFFFFF" cx="29.6" cy="19.4" r="2.4"/></g></g></svg></g></g></svg></svg>
		</div>
		<div class="chat-close">
			<svg width="38px" height="34px" version="1.1" id="chat_close" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 60 60" style="enable-background:new 0 0 60 60;" xml:space="preserve"><g transform="matrix(1.25 0 0 -1.25 0 45)"><g><g><path fill="#DD2E44" d="M27.7,12l12.8,12.8c1,1,1,2.7,0,3.7c-1,1-2.7,1-3.7,0L24,15.7L11.2,28.5c-1,1-2.7,1-3.7,0c-1-1-1-2.7,0-3.7L20.3,12L7.5-0.8c-1-1-1-2.7,0-3.7C8-5,8.7-5.3,9.3-5.3c0.7,0,1.3,0.3,1.8,0.8L24,8.3L36.8-4.5C37.3-5,38-5.3,38.7-5.3c0.7,0,1.3,0.3,1.8,0.8c1,1,1,2.7,0,3.7L27.7,12z"/></g></g></g></svg>
		</div>
	<?php else : ?>
		<button type="button" name="fbchatButton" aria-label="Facebook" role="button" id="fbchatButton" class="fb-chat" style="display: none;">
			<svg width="60px" height="60px" viewBox="0 0 60 60" cursor="pointer"><svg x="0" y="0" width="60px" height="60px"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g><circle fill="#0084FF" cx="30" cy="30" r="30"></circle><svg x="10" y="10"><g transform="translate(0.000000, -10.000000)" fill="#FFFFFF"><g id="logo" transform="translate(0.000000, 10.000000)"><path d="M20,0 C31.2666,0 40,8.2528 40,19.4 C40,30.5472 31.2666,38.8 20,38.8 C17.9763,38.8 16.0348,38.5327 14.2106,38.0311 C13.856,37.9335 13.4789,37.9612 13.1424,38.1098 L9.1727,39.8621 C8.1343,40.3205 6.9621,39.5819 6.9273,38.4474 L6.8184,34.8894 C6.805,34.4513 6.6078,34.0414 6.2811,33.7492 C2.3896,30.2691 0,25.2307 0,19.4 C0,8.2528 8.7334,0 20,0 Z M7.99009,25.07344 C7.42629,25.96794 8.52579,26.97594 9.36809,26.33674 L15.67879,21.54734 C16.10569,21.22334 16.69559,21.22164 17.12429,21.54314 L21.79709,25.04774 C23.19919,26.09944 25.20039,25.73014 26.13499,24.24744 L32.00999,14.92654 C32.57369,14.03204 31.47419,13.02404 30.63189,13.66324 L24.32119,18.45264 C23.89429,18.77664 23.30439,18.77834 22.87569,18.45674 L18.20299,14.95224 C16.80079,13.90064 14.79959,14.26984 13.86509,15.75264 L7.99009,25.07344 Z"></path></g></g></svg></g></g></svg></svg>
		</button>
	<?php endif; ?>
	</div>
	<?php if($whatsappNumber): ?>
		<div class="menu-item wp-chat" id="whatsapp-chat">
			<a href="https://api.whatsapp.com/send?phone=<?php echo $whatsappWP; ?>" aria-label="WhatsApp" target="_blank" id="wpChat" rel="nofollow noopener noreferrer">
				<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 60 60" style="enable-background:new 0 0 60 60;" xml:space="preserve"><style type="text/css">.st0{fill:#FFFFFF;}.st1{fill:none;}.st2{fill:url(#SVGID_1_);}</style><g><g><circle class="st0" cx="30" cy="30" r="30"/><g><rect id="svg_container_3" x="10" y="10" class="st1" width="40" height="40"/></g></g></g><g><linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="-101.3782" y1="158.5808" x2="-100.4977" y2="158.5808" gradientTransform="matrix(0 -41.6418 -41.6418 0 6633.5845 -4173.2339)"><stop  offset="0" style="stop-color:#20B038"/><stop  offset="1" style="stop-color:#60D66A"/></linearGradient><path class="st2" d="M11.9,29.8c0,3.2,0.8,6.3,2.4,9.1l-2.6,9.4l9.6-2.5C24,47.3,27,48,30.1,48h0c10,0,18.2-8.2,18.2-18.2c0-4.9-1.9-9.4-5.3-12.9c-3.4-3.4-8-5.3-12.9-5.3C20.1,11.7,11.9,19.8,11.9,29.8 M30.1,48L30.1,48L30.1,48C30.1,48,30.1,48,30.1,48"/><path class="st0" d="M25.4,22c-0.4-0.8-0.7-0.8-1.1-0.8c-0.3,0-0.6,0-0.9,0c-0.3,0-0.8,0.1-1.3,0.6c-0.4,0.5-1.6,1.6-1.6,3.9c0,2.3,1.7,4.6,1.9,4.9c0.2,0.3,3.3,5.2,8,7.1c4,1.6,4.8,1.3,5.6,1.2c0.9-0.1,2.8-1.1,3.2-2.2c0.4-1.1,0.4-2,0.3-2.2c-0.1-0.2-0.4-0.3-0.9-0.5c-0.5-0.2-2.8-1.4-3.2-1.5c-0.4-0.2-0.7-0.2-1.1,0.2c-0.3,0.5-1.2,1.5-1.5,1.8c-0.3,0.3-0.5,0.4-1,0.1c-0.5-0.2-2-0.7-3.8-2.3c-1.4-1.2-2.3-2.8-2.6-3.3c-0.3-0.5,0-0.7,0.2-1c0.2-0.2,0.5-0.5,0.7-0.8c0.2-0.3,0.3-0.5,0.5-0.8c0.2-0.3,0.1-0.6,0-0.8C26.7,25.2,25.8,22.9,25.4,22"/></g></svg>
			</a>
		</div>
		<div class="menu-item fb-chat" id="facebook-chat">
			<a href="javascript:void(0)" aria-label="Facebook" id="fbchatButton">
				<svg width="60px" height="60px" viewBox="0 0 60 60" cursor="pointer"><svg x="0" y="0" width="60px" height="60px"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g><circle fill="#0084FF" cx="30" cy="30" r="30"></circle><svg x="10" y="10"><g transform="translate(0.000000, -10.000000)" fill="#FFFFFF"><g id="logo" transform="translate(0.000000, 10.000000)"><path d="M20,0 C31.2666,0 40,8.2528 40,19.4 C40,30.5472 31.2666,38.8 20,38.8 C17.9763,38.8 16.0348,38.5327 14.2106,38.0311 C13.856,37.9335 13.4789,37.9612 13.1424,38.1098 L9.1727,39.8621 C8.1343,40.3205 6.9621,39.5819 6.9273,38.4474 L6.8184,34.8894 C6.805,34.4513 6.6078,34.0414 6.2811,33.7492 C2.3896,30.2691 0,25.2307 0,19.4 C0,8.2528 8.7334,0 20,0 Z M7.99009,25.07344 C7.42629,25.96794 8.52579,26.97594 9.36809,26.33674 L15.67879,21.54734 C16.10569,21.22334 16.69559,21.22164 17.12429,21.54314 L21.79709,25.04774 C23.19919,26.09944 25.20039,25.73014 26.13499,24.24744 L32.00999,14.92654 C32.57369,14.03204 31.47419,13.02404 30.63189,13.66324 L24.32119,18.45264 C23.89429,18.77664 23.30439,18.77834 22.87569,18.45674 L18.20299,14.95224 C16.80079,13.90064 14.79959,14.26984 13.86509,15.75264 L7.99009,25.07344 Z"></path></g></g></svg></g></g></svg></svg>
			</a>
		</div>
	<?php endif; ?>
</nav>
<script type="text/javascript">
// 3SD Code Script Run after Document Loaded
document.addEventListener("DOMContentLoaded", function() {
	// console.log(document.getElementById('whatsapp-chat'));
	chatAction();

});


var chatAction = function(){
	<?php if($whatsappNumber): ?>

	if($('wpChat') || $('facebook-jssdk')){
		$('menu-chat').show();
	}

	if($('fb-root') && $$('.tejar-mobile').length === 0){
		$('facebook-chat').insert($('fb-root'));
	}

	if($$('.tejar-mobile').length > 0 && $('fb-page-id')){
		$('fbchatButton').show();
	}

	$('chat_action').observe('click', function(event) {
		if($(this).up('.menu-chat').hasClassName('open')){
			$(this).up('.menu-chat').removeClassName('open');
			$(this).removeClassName('open');
			FB.CustomerChat.hideDialog();
		} else {
			$(this).up('.menu-chat').addClassName('open');
			$(this).addClassName('open');

		}
	});

	// if($('wpChat')){$('wpChat').observe('click', function(event) {window.open('https://api.whatsapp.com/send?phone=<?php echo $whatsappWP; ?>', '_blank');});}
	if($('fbchatButton')){$('fbchatButton').observe('click', function(event) {if($('fb-page-id') && $('fb-page-id').value){window.open($('fb-page-id').value, '_blank');}});}

	<?php else: ?>

		if($$('.tejar-mobile').length > 0 && $('fb-page-id')){
			$('menu-chat').show();
			$('fbchatButton').show();
			if($('fbchatButton')){$('fbchatButton').observe('click', function(event) {if($('fb-page-id') && $('fb-page-id').value){window.open($('fb-page-id').value, '_blank');}});}
		}

	<?php endif; ?>
}
</script>
